(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{134:function(e,t,a){e.exports=a(208)},184:function(e,t,a){},195:function(e,t){},197:function(e,t){},204:function(e,t,a){},208:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(49),l=a.n(o),i=a(60),s=a(213),u=a(125),m=a(214),p=a(9),f=a(222),h=a(225),d=a(58),g=a(215),E=a(223),b=a(216),v=a(18),w=a(19),x=a(123),C=a(23),S=a(12),y=a.n(S),j=a(22),O=a(6),P=a(7),k=a(13),I=a(10),z=a(14),L=a(69),R=a.n(L);n="https://bsafebackend.herokuapp.com/";var A=R.a.create({withCredentials:!0,baseURL:n}),N={test:function(){var e=Object(j.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),signup:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/auth/signup",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),login:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/auth/login",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logOut:function(){var e=Object(j.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/auth/logout");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createContact:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/contacts/create",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteContact:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.delete("/contacts/delete/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getContacts:function(){var e=Object(j.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/contacts/getContacts");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createPlace:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.post("/safePlace/create",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deletePlace:function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.delete("/safePlace/delete/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPlaces:function(){var e=Object(j.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/safePlace/getPlaces");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAllPlaces:function(){var e=Object(j.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/safePlace/getAllPlaces");case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),sendSMS:function(){var e=Object(j.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.get("/sms/send-text");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},U=Object(r.createContext)(),D=function(e){function t(){var e,a;Object(O.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(k.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(r)))).state={viewport:{width:400,height:400,latitude:19.4326018,longitude:-99.1353989,zoom:11},formSignup:{name:"",email:"",password:"",genre:"",age:18},formLogin:{email:"",password:""},formContact:{name:"",email:"",phone:""},formSafePlace:{geometry:null,properties:null,name:"",description:""},loggedUser:null,isLogged:!1,contacts:null,places:null},a.handleHelpRequest=Object(j.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.sendSMS();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),a.handleDeletePlace=function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.deletePlace(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleUpdatePlaces=Object(j.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getPlaces();case 2:t=e.sent,n=t.places,a.setState({places:n});case 5:case"end":return e.stop()}}),e)}))),a.updateViewPort=function(e){a.setState({viewport:e})},a.handleSafePlaceSubmit=function(){var e=Object(j.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.formSafePlace,a.setState({formSafePlace:{name:"",description:"",geometry:null,properties:null}}),e.next=5,N.createPlace(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleSafePlaceInput=function(e){var t=a.state.formSafePlace,n=e.target,r=n.name,c=n.value;t[r]=c,a.setState({formSafePlace:t})},a.handleOnSelectMap=function(e,t){a.setState({viewport:e});var n=t.properties,r=t.geometry;a.setState({formSafePlace:{properties:n,geometry:r}})},a.handleLogOut=Object(j.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.logOut();case 2:a.props.history.push("/"),a.setState({loggedUser:null,isLogged:!1});case 4:case"end":return e.stop()}}),e)}))),a.handleDeleteContact=function(){var e=Object(j.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.deleteContact(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleContactInput=function(e){var t=a.state.formContact,n=e.target,r=n.name,c=n.value;t[r]=c,a.setState({formContact:t})},a.handleContactSubmit=function(){var e=Object(j.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.formContact,a.setState({formContact:{name:"",email:"",phone:""}}),e.next=5,N.createContact(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleLoginInput=function(e){var t=a.state.formLogin,n=e.target,r=n.name,c=n.value;t[r]=c,a.setState({formLogin:t})},a.handleUpdateContacts=Object(j.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.getContacts();case 2:t=e.sent,n=t.contacts,a.setState({contacts:n});case 5:case"end":return e.stop()}}),e)}))),a.handleLoginSubmit=function(e){e.preventDefault();var t=a.state.formLogin;return N.login(t).then(function(){var e=Object(j.a)(y.a.mark((function e(t){var n,r,c,o,l;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data.user,e.next=3,N.getContacts();case 3:return r=e.sent,c=r.contacts,a.setState({contacts:c}),e.next=8,N.getPlaces();case 8:return o=e.sent,l=o.places,a.setState({places:l}),a.setState({loggedUser:n,isLogged:!0}),e.abrupt("return",{user:n,msg:"logged"});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return a.setState({loggedUser:null,isLogged:!1,formLogin:{email:"",password:""}}),{user:null,msg:"Invalid username/password."}})).finally((function(){return a.setState({formLogin:{email:"",password:""}})}))},a.handleSignupInput=function(e){var t=a.state.formSignup,n=e.target,r=n.name,c=n.value;t[r]=c,a.setState({formSignup:t})},a.handleInputNumber=function(e){var t=a.state.formSignup;t.age=e,a.setState({formSignup:t})},a.handleSignupSubmit=function(){var e=Object(j.a)(y.a.mark((function e(t){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.state.formSignup,a.setState({formSignup:{name:"",email:"",password:"",genre:"",age:0}}),e.next=5,N.signup(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a}return Object(z.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e=this.state,t=this.handleHelpRequest,a=this.handleDeletePlace,n=this.handleUpdatePlaces,r=this.handleSafePlaceSubmit,o=this.handleSafePlaceInput,l=this.updateViewPort,i=this.handleOnSelectMap,s=this.handleLogOut,u=this.handleDeleteContact,m=this.handleUpdateContacts,p=this.handleContactSubmit,f=this.handleContactInput,h=this.handleSignupInput,d=this.handleSignupSubmit,g=this.handleInputNumber,E=this.handleLoginInput,b=this.handleLoginSubmit;return c.a.createElement(U.Provider,{value:{state:e,handleHelpRequest:t,handleDeletePlace:a,handleUpdatePlaces:n,handleSafePlaceSubmit:r,handleSafePlaceInput:o,updateViewPort:l,handleLogOut:s,handleOnSelectMap:i,handleDeleteContact:u,handleUpdateContacts:m,handleContactSubmit:p,handleContactInput:f,handleSignupInput:h,handleSignupSubmit:d,handleInputNumber:g,handleLoginInput:E,handleLoginSubmit:b}},this.props.children)}}]),t}(r.Component),M=Object(i.f)(D);var q=function(){var e=Object(r.useContext)(U),t=Object(s.a)(),a=t.isOpen,n=t.onOpen,o=t.onClose,l=c.a.useRef(),i=function(){e.handleLogOut().then().catch()};return c.a.createElement(U.Consumer,null,(function(e){var t=e.state,r=t.isLogged,s=t.loggedUser;return r?c.a.createElement(u.a,{w:"100",h:"10vh",px:5,bg:"#313131",alignItems:"center",justify:"space-between"},c.a.createElement(C.c,{exact:!0,to:"/"},c.a.createElement(u.a,{flexDirection:"row",justifyContent:"center",alignItems:"center"},c.a.createElement(v.a,{icon:w.m,size:"2x",color:"white"}),c.a.createElement(m.a,{px:3,color:"white",as:"h2",size:"xl"},"BSafe"))),c.a.createElement(p.a,null,c.a.createElement(f.a,{ref:l,variantColor:"transparent",onClick:n},c.a.createElement(v.a,{icon:w.a,size:"2x",color:"#CA3E47"})),c.a.createElement(h.a,{isOpen:a,placement:"right",onClose:o,finalFocusRef:l},c.a.createElement(h.d,null),c.a.createElement(h.c,null,c.a.createElement(h.b,null),c.a.createElement(d.f,null,c.a.createElement(g.a,{isInline:!0},c.a.createElement(E.a,{name:s.name,src:s.image}))),c.a.createElement(d.b,null,c.a.createElement(C.b,{to:"/"},"Home"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(C.b,{to:"/profile"},"Profile"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(C.b,{to:"/profile/contacts"},"My Safe Contacts"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(C.b,{to:"/profile/places"},"My Safe Places")),c.a.createElement(d.e,null,c.a.createElement(b.a,{fontSize:"md"},"Ironhack WDFT 2020 - @oljudi",c.a.createElement(v.a,{icon:x.a})),c.a.createElement(f.a,{variant:"outline",variantColor:"red",mr:3,onClick:i},"LogOut")))))):c.a.createElement(C.c,{exact:!0,to:"/"},c.a.createElement(u.a,{w:"100",h:"10vh",px:5,bg:"#313131",alignItems:"center",justify:"space-between"},c.a.createElement(u.a,{flexDirection:"row",justifyContent:"center",alignItems:"center"},c.a.createElement(v.a,{icon:w.m,size:"2x",color:"white"}),c.a.createElement(m.a,{px:3,color:"white",as:"h2",size:"xl"},"BSafe"))))}))},W=a(16),_=a(37),T=a.n(_),F=R.a.create({baseURL:"https://datos.cdmx.gob.mx/api/records/1.0/search/?dataset=carpetas-de-investigacion-pgj-de-la-ciudad-de-mexico&rows=200&facet=ao_hechos&facet=mes_hechos&facet=delito&facet=categoria_delito&facet=fiscalia&facet=alcaldia_hechos&facet=colonia_hechos&facet=ao_inicio&facet=mes_inicio&format=geojson"}),H={heatmap:function(){var e=Object(j.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.get();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Y=(a(184),{width:"100vw",height:"80vh",position:"absolute"}),B=function(){var e=Object(r.useState)(null),t=Object(W.a)(e,2),a=t[0],n=t[1],o=Object(r.useRef)(null);return Object(r.useEffect)((function(){T.a.accessToken="pk.eyJ1Ijoib2xqdWRpIiwiYSI6ImNrNjgyb3FwZjAwbnAzZ29kYjU5OWplNjAifQ.2YR_Fhyhc9ePpICEyoWhCw";a||function(e){var t=e.setMap,a=e.mapContainer;if(navigator.geolocation){navigator.geolocation.getCurrentPosition((function(e){var t=[e.coords.longitude,e.coords.latitude];(new T.a.Marker).setLngLat(t).addTo(n)}));var n=new T.a.Map({container:a.current,style:"mapbox://styles/mapbox/dark-v10",center:[-99.1353989,19.4326018],zoom:10});N.getAllPlaces().then((function(e){e.places.forEach((function(e){var t=document.createElement("div");t.className="markerSafe",new T.a.Marker(t).setLngLat(e.geometry.coordinates).setPopup(new T.a.Popup({offset:25}).setHTML("<h3>"+e.name+"</h3><p>"+e.description+"</p>")).addTo(n)}))})),H.heatmap().then((function(e){n.on("load",(function(){n.addSource("data",{type:"geojson",data:e.data}),n.addLayer({id:"danger",type:"heatmap",source:"data",maxzoom:24,paint:{"heatmap-intensity":{stops:[[15,1],[15,3]]},"heatmap-opacity":{default:1,stops:[[14,1],[15,0]]}}}),t(n),n.resize()}))}))}}({setMap:n,mapContainer:o})}),[a]),c.a.createElement("div",{ref:function(e){return o.current=e},style:Y})};var V=function(){return c.a.createElement("div",null,c.a.createElement("h2",null,"Not found"))},Z=a(220);var J=function(){var e=Object(r.useContext)(U),t=Object(Z.a)(),a=function(){e.handleHelpRequest().then((function(e){t({title:"SMS Send",description:"Help Request sended to your safe contacts, please contact 911 for help",status:"success"})})).catch((function(e){t({title:"Error",description:"Can't send the sms, please contact 911 for help",status:"error"})}))};return c.a.createElement(U.Consumer,null,(function(e){return e.state.isLogged?c.a.createElement(u.a,{w:"100vw",h:"10vh",px:5,bg:"#313131",alignItems:"center",justify:"space-between",bottom:"0",position:"fixed"},c.a.createElement(C.b,{to:"/c5view"},c.a.createElement(v.a,{icon:w.d,size:"2x",color:"white"})),c.a.createElement(C.b,{to:"/addPlaces"},c.a.createElement(v.a,{icon:w.g,size:"2x",color:"white"})),c.a.createElement(p.a,null,c.a.createElement(f.a,{variantColor:"transparent",onClick:function(){return a()}},c.a.createElement(v.a,{icon:w.c,size:"3x",color:"#CA3E47"})))):c.a.createElement(u.a,{w:"100vw",h:"10vh",px:5,bg:"#313131",alignItems:"center",justify:"space-between",bottom:"0",position:"fixed"},c.a.createElement(C.b,{to:"/c5view"},c.a.createElement(v.a,{icon:w.d,size:"2x",color:"white"})),c.a.createElement(C.b,{to:"/login"},c.a.createElement(v.a,{icon:w.k,size:"2x",color:"white"})))}))},Q=a(85),G=a(217),$=a(96),K=a(72);var X=function(e){var t=e.width,a=e.children,n=e.title,r=e.submit,o=e.bgColor;return c.a.createElement(p.a,{backgroundColor:o,onSubmit:r,as:"form",w:t||"350px",boxShadow:"x1"},c.a.createElement(g.a,{spacing:8,p:8},c.a.createElement(m.a,{textAlign:"center",as:"h1",color:"white"},n),a,c.a.createElement(f.a,{backgroundColor:"#CA3E47",type:"submit",color:"white"},n)))};var ee=function(e){var t=e.history,a=Object(r.useContext)(U),n=Object(Z.a)(),o=c.a.useState(!1),l=Object(W.a)(o,2),i=l[0],s=l[1],m=function(){return s(!i)},p=function(e){a.handleLoginSubmit(e).then((function(e){t.push("/")})).catch((function(e){n({title:"Please, try again!",description:"Username or password Incorrect!!",status:"error"})}))};return c.a.createElement(U.Consumer,null,(function(e){return c.a.createElement(u.a,{backgroundColor:"#110D40",w:"100vw",h:"90vh",align:"center",justify:"center"},c.a.createElement(g.a,null,c.a.createElement(X,{submit:p,bgColor:"transparent",title:"Login"},c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(G.a,null,c.a.createElement($.a,{children:c.a.createElement(v.a,{icon:w.b,size:"1x",color:"gray"})}),c.a.createElement(K.a,{name:"email",value:e.state.formLogin.email,onChange:e.handleLoginInput,type:"email",placeholder:"Email"}))),c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(G.a,null,c.a.createElement($.a,{children:c.a.createElement(v.a,{icon:w.e,size:"1x",color:"gray"})}),c.a.createElement(K.a,{type:i?"text":"password",name:"password",value:e.state.formLogin.password,onChange:e.handleLoginInput,placeholder:"Password"}),c.a.createElement($.b,{width:"4.5rem"},c.a.createElement(f.a,{h:"1.75rem",size:"sm",onClick:m},i?"Hide":"Show"))))),c.a.createElement(b.a,{fontSize:"sm",color:"white"},"Don't have an account? - ",c.a.createElement(C.b,{to:"/signup"},"Signup"))))}))},te=a(224),ae=a(218),ne=a(226);var re=function(e){var t=e.history,a=Object(r.useContext)(U),n=Object(Z.a)(),o=c.a.useState(!1),l=Object(W.a)(o,2),i=l[0],s=l[1],m=function(){return s(!i)},p=function(e){a.handleSignupSubmit(e).then((function(e){n({title:"Congrats!!",description:"Your Account have been created sucessfully!",status:"success",duration:5e3,isClosable:!0}),t.push("/login")})).catch((function(e){console.log(e),n({title:"ERROR",description:"We cannot create your account ".concat(e)})}))};return c.a.createElement(U.Consumer,null,(function(e){return c.a.createElement(u.a,{backgroundColor:"#110D40",w:"100vw",h:"90vh",align:"center",justify:"center"},c.a.createElement(g.a,null,c.a.createElement(X,{submit:p,bgColor:"transparent",title:"SignUp"},c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(G.a,null,c.a.createElement($.a,{children:c.a.createElement(v.a,{icon:w.l,size:"1x",color:"gray"})}),c.a.createElement(K.a,{name:"name",value:e.state.formSignup.name,onChange:e.handleSignupInput,type:"text",placeholder:"Name"}))),c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(G.a,null,c.a.createElement($.a,{children:c.a.createElement(v.a,{icon:w.b,size:"1x",color:"gray"})}),c.a.createElement(K.a,{name:"email",value:e.state.formSignup.email,onChange:e.handleSignupInput,type:"email",placeholder:"Email"}))),c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(G.a,null,c.a.createElement($.a,{children:c.a.createElement(v.a,{icon:w.e,size:"1x",color:"gray"})}),c.a.createElement(K.a,{type:i?"text":"password",name:"password",value:e.state.formSignup.password,onChange:e.handleSignupInput,placeholder:"Password"}),c.a.createElement($.b,{width:"4.5rem"},c.a.createElement(f.a,{h:"1.75rem",size:"sm",onClick:m},i?"Hide":"Show")))),c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(te.a,{placeholder:"Genre",name:"genre",value:e.state.formSignup.genre,onChange:e.handleSignupInput},c.a.createElement("option",{value:"M"},"M"),c.a.createElement("option",{value:"F"},"F"))),c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(ae.a,{color:"white",htmlFor:"age"}," ","Age"," "),c.a.createElement(u.a,null,c.a.createElement(ne.d,{id:"age",name:"age",value:e.state.formSignup.age,onChange:e.handleInputNumber},c.a.createElement(ne.c,null),c.a.createElement(ne.a,null),c.a.createElement(ne.b,{fontSize:"sm",width:"32px",height:"20px",children:e.state.formSignup.age}))))),c.a.createElement(b.a,{fontSize:"sm",color:"white"},"Already have an Account? - ",c.a.createElement(C.b,{to:"/login"},"Login"))))}))};var ce=function(e){var t=e.history;return Object(r.useContext)(U),c.a.createElement(U.Consumer,null,(function(e){var a=e.state,n=a.isLogged,r=a.loggedUser;if(n)return c.a.createElement(u.a,{backgroundColor:"#110D40",w:"100vw",h:"90vh",align:"center",justify:"center",color:"white"},c.a.createElement(g.a,{align:"center",justify:"center"},c.a.createElement(E.a,{size:"2xl",name:r.name,src:r.image}),c.a.createElement("p",null,"Name"),c.a.createElement(m.a,{as:"h6"},r.name),c.a.createElement("p",null,"Email"),c.a.createElement(m.a,{as:"h6"},r.email),c.a.createElement("br",null),c.a.createElement(u.a,null,c.a.createElement(g.a,{p:4},c.a.createElement("p",null,"Genre"),c.a.createElement(m.a,{as:"h6"},r.genre)),c.a.createElement(g.a,{p:4},c.a.createElement("p",null,"Age"),c.a.createElement(m.a,{as:"h6"},r.age))),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement(u.a,{justify:"space-evenly"},c.a.createElement(g.a,{p:4},c.a.createElement(C.b,{to:"/profile/places"},c.a.createElement(f.a,{variantColor:"red"},"Places"))),c.a.createElement(g.a,{p:4},c.a.createElement(C.b,{to:"/profile/contacts"},c.a.createElement(f.a,{variantColor:"red"},"Contacts"))))));t.push("/login")}))};var oe=function(e){var t=e.contact,a=Object(r.useContext)(U),n=Object(Z.a)();return c.a.createElement(g.a,{bg:"gray.800",w:"400px",p:4,mb:3},c.a.createElement(u.a,{justify:"flex-end"},c.a.createElement(f.a,{variantColor:"red",borderRadius:"80px",onClick:function(){return e=t._id,void a.handleDeleteContact(e).then((function(e){a.handleUpdateContacts().then().catch(),n({title:"Contact Deleted",status:"error"})})).catch((function(e){n({title:"Error",description:"Can't delete contact",status:"error"})}));var e}},c.a.createElement(v.a,{icon:w.h,size:"1x"}))),c.a.createElement(u.a,{p:1},c.a.createElement(b.a,{fontSize:"lg"},"Name: "),c.a.createElement(b.a,{fontSize:"2xl",ml:8},t.name)),c.a.createElement(u.a,{p:1},c.a.createElement(b.a,{fontSize:"lg"},"Email: "),c.a.createElement(b.a,{fontSize:"2xl",ml:8},t.email)),c.a.createElement(u.a,{p:1},c.a.createElement(b.a,{fontSize:"lg"},"Phone: "),c.a.createElement(b.a,{fontSize:"2xl",ml:8},t.phone)))};var le=function(e){var t=e.history,a=Object(r.useContext)(U).state.contacts;return c.a.createElement(U.Consumer,null,(function(e){if(e.state.isLogged)return c.a.createElement(u.a,{backgroundColor:"#110D40",w:"100vw",h:"90vh",justify:"center",color:"white"},c.a.createElement(g.a,null,c.a.createElement(m.a,{as:"h5",p:4},"Safe Contacts"),c.a.createElement(g.a,{h:"55vh",w:"90vw",overflow:"scroll"},a.map((function(e,t){return c.a.createElement(oe,{key:t,contact:e})}))),c.a.createElement("br",null),c.a.createElement(u.a,{justify:"flex-end"},c.a.createElement(C.b,{to:"/contact/new"},c.a.createElement(f.a,{variantColor:"red",borderRadius:"100px",h:"70px",w:"70px"},c.a.createElement(v.a,{icon:w.j,size:"2x"}))))));t.push("/login")}))};var ie=function(e){var t=e.history,a=Object(r.useContext)(U),n=Object(Z.a)(),o=function(e){a.handleContactSubmit(e).then((function(e){a.handleUpdateContacts().then().catch(),n({title:"Created",status:"success",duration:5e3,isClosable:!0}),t.push("/profile/contacts")})).catch((function(e){n({title:"Please, try again!",description:"Can't create contact",status:"error"})}))};return c.a.createElement(U.Consumer,null,(function(e){return c.a.createElement(u.a,{backgroundColor:"#110D40",w:"100vw",h:"90vh",align:"center",justify:"center"},c.a.createElement(X,{submit:o,bgColor:"transparent",title:"Add safe contact"},c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(G.a,null,c.a.createElement($.a,{children:c.a.createElement(v.a,{icon:w.l,size:"1x",color:"gray"})}),c.a.createElement(K.a,{name:"name",value:e.state.formContact.name,onChange:e.handleContactInput,type:"text",placeholder:"Name"}))),c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(G.a,null,c.a.createElement($.a,{children:c.a.createElement(v.a,{icon:w.b,size:"1x",color:"gray"})}),c.a.createElement(K.a,{name:"email",value:e.state.formContact.email,onChange:e.handleContactInput,type:"email",placeholder:"Email"}))),c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(G.a,null,c.a.createElement($.a,{children:c.a.createElement(v.a,{icon:w.i,size:"1x",color:"gray"})}),c.a.createElement(K.a,{name:"phone",value:e.state.formContact.phone,onChange:e.handleContactInput,type:"text",placeholder:"Phone Number"})))))}))},se=a(130),ue=a(133),me=a(219),pe={mapboxApiAccessToken:"pk.eyJ1Ijoib2xqdWRpIiwiYSI6ImNrNjgyb3FwZjAwbnAzZ29kYjU5OWplNjAifQ.2YR_Fhyhc9ePpICEyoWhCw"},fe={width:"200px",height:"20vh",position:"absolute"},he={country:"mx"},de=function(e){var t=e.history,a=Object(r.useContext)(U),n=Object(Z.a)(),o=function(e){a.handleSafePlaceSubmit(e).then((function(e){a.handleUpdatePlaces().then().catch(),n({title:"Place Created",status:"success",isClosable:!0}),t.push("/")})).catch((function(e){n({title:"Something went wrong",description:"Please try again later!!",status:"error"})}))},l=function(e,t){a.handleOnSelectMap(e,t)},i=function(e){a.updateViewPort(e)};return c.a.createElement(U.Consumer,null,(function(e){var a=e.state,n=a.viewport;if(a.isLogged)return c.a.createElement(u.a,{backgroundColor:"gray.600",w:"100vw",h:"90vh",justify:"center"},c.a.createElement(g.a,null,c.a.createElement(X,{submit:o,bgColor:"transparent",title:"Add Safe Place"},c.a.createElement(se.a,Object.assign({},pe,{onSelected:l,viewport:n,hideOnSelect:!0,queryParams:he,limit:10,className:"react-geocoder",initialInputValue:"Search",color:"white"})),c.a.createElement(ue.a,Object.assign({},pe,n,fe,{onViewportChange:i})),c.a.createElement("br",null),c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(G.a,null,c.a.createElement($.a,{children:c.a.createElement(v.a,{icon:w.f,size:"1x",color:"gray"})}),c.a.createElement(K.a,{name:"name",type:"text",placeholder:"Name",value:e.state.formSafePlace.name,onChange:e.handleSafePlaceInput}))),c.a.createElement(Q.a,{isRequired:!0},c.a.createElement(G.a,null,c.a.createElement(me.a,{name:"description",type:"text",placeholder:"Description",value:e.state.formSafePlace.description,onChange:e.handleSafePlaceInput}))))));t.push("/login")}))},ge=R.a.create({baseURL:"https://datos.cdmx.gob.mx/api/records/1.0/search/?dataset=ubicacion-acceso-gratuito-internet-wifi-c5&rows=200&facet=colonia&facet=alcaldia&facet=boton&facet=altavoz&facet=tipo_de_poste&refine.boton=CON+BOTON&format=geojson"}),Ee={map:function(){var e=Object(j.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.get();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},be=(a(204),{width:"100vw",height:"80vh",position:"absolute"}),ve=function(){var e=Object(r.useState)(null),t=Object(W.a)(e,2),a=t[0],n=t[1],o=Object(r.useRef)(null);return Object(r.useEffect)((function(){T.a.accessToken="pk.eyJ1Ijoib2xqdWRpIiwiYSI6ImNrNjgyb3FwZjAwbnAzZ29kYjU5OWplNjAifQ.2YR_Fhyhc9ePpICEyoWhCw";a||function(e){e.setMap;var t=e.mapContainer;if(navigator.geolocation){navigator.geolocation.getCurrentPosition((function(e){var t=[e.coords.longitude,e.coords.latitude];(new T.a.Marker).setLngLat(t).addTo(a)}));var a=new T.a.Map({container:t.current,style:"mapbox://styles/mapbox/dark-v10",center:[-99.1353989,19.4326018],zoom:10});Ee.map().then((function(e){e.data.features.forEach((function(e){var t=document.createElement("div");t.className="marker",new T.a.Marker(t).setLngLat(e.geometry.coordinates).setPopup(new T.a.Popup({offset:25}).setHTML("<h3>C5 Camera</h3><p>"+e.properties.estatus_conectividad+"</p>")).addTo(a)}))}))}}({setMap:n,mapContainer:o})}),[a]),c.a.createElement("div",{ref:function(e){return o.current=e},style:be})};var we=function(e){var t=e.place,a=Object(r.useContext)(U),n=Object(Z.a)();return c.a.createElement(g.a,{bg:"gray.800",w:"400px",p:4,mb:3},c.a.createElement(u.a,{justify:"flex-end"},c.a.createElement(f.a,{variantColor:"red",borderRadius:"80px",onClick:function(){return e=t._id,void a.handleDeletePlace(e).then((function(e){a.handleUpdatePlaces().then().catch(),n({title:"Contact Deleted",status:"error"})})).catch((function(e){n({title:"Error",description:"Can't delete Place",status:"error"})}));var e}},c.a.createElement(v.a,{icon:w.h,size:"1x"}))),c.a.createElement(u.a,{p:1},c.a.createElement(b.a,{fontSize:"lg"},"Name: "),c.a.createElement(b.a,{fontSize:"2xl",ml:8},t.name)),c.a.createElement(u.a,{p:1},c.a.createElement(b.a,{fontSize:"lg"},"Description: "),c.a.createElement(b.a,{fontSize:"2xl",ml:8},t.description)),c.a.createElement(u.a,{p:1},c.a.createElement(b.a,{fontSize:"lg"},"Address: "),c.a.createElement(b.a,{fontSize:"2xl",ml:8},t.properties.address)))};var xe=function(e){var t=e.history,a=Object(r.useContext)(U).state.places;return c.a.createElement(U.Consumer,null,(function(e){if(e.state.isLogged)return c.a.createElement(u.a,{backgroundColor:"#110D40",w:"100vw",h:"90vh",justify:"center",color:"white"},c.a.createElement(g.a,null,c.a.createElement(m.a,{as:"h5",p:4},"Safe Places"),c.a.createElement(g.a,{h:"55vh",w:"90vw",overflow:"scroll"},a.map((function(e,t){return c.a.createElement(we,{key:t,place:e})}))),c.a.createElement("br",null),c.a.createElement(u.a,{justify:"flex-end"},c.a.createElement(C.b,{to:"/addPlaces"},c.a.createElement(f.a,{variantColor:"red",borderRadius:"100px",h:"70px",w:"70px"},c.a.createElement(v.a,{icon:w.j,size:"2x"})," ")))));t.push("/login")}))},Ce=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(q,null),c.a.createElement(i.c,null,c.a.createElement(i.a,{exact:!0,path:"/",component:B}),c.a.createElement(i.a,{exact:!0,path:"/login",component:ee}),c.a.createElement(i.a,{exact:!0,path:"/signup",component:re}),c.a.createElement(i.a,{exact:!0,path:"/profile",component:ce}),c.a.createElement(i.a,{exact:!0,path:"/c5view",component:ve}),c.a.createElement(i.a,{exact:!0,path:"/profile/contacts",component:le}),c.a.createElement(i.a,{exact:!0,path:"/profile/places",component:xe}),c.a.createElement(i.a,{exact:!0,path:"/contact/new",component:ie}),c.a.createElement(i.a,{exact:!0,path:"/addPlaces",component:de}),c.a.createElement(i.a,{component:V})),c.a.createElement(J,null))},Se=a(31),ye=a(227),je=a(97),Oe=a(221),Pe={user:{path:c.a.createElement("path",{d:"M12.075,10.812c1.358-0.853,2.242-2.507,2.242-4.037c0-2.181-1.795-4.618-4.198-4.618S5.921,4.594,5.921,6.775c0,1.53,0.884,3.185,2.242,4.037c-3.222,0.865-5.6,3.807-5.6,7.298c0,0.23,0.189,0.42,0.42,0.42h14.273c0.23,0,0.42-0.189,0.42-0.42C17.676,14.619,15.297,11.677,12.075,10.812 M6.761,6.775c0-2.162,1.773-3.778,3.358-3.778s3.359,1.616,3.359,3.778c0,2.162-1.774,3.778-3.359,3.778S6.761,8.937,6.761,6.775 M3.415,17.69c0.218-3.51,3.142-6.297,6.704-6.297c3.562,0,6.486,2.787,6.705,6.297H3.415z"}),viewBox:"0 0 20 20"}},ke=Object(je.a)({},Oe.a,{icons:Object(je.a)({},Oe.a.icons,{},Pe)}),Ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ze(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function Le(){return c.a.createElement(Se.a,{theme:ke},c.a.createElement(ye.a,null),c.a.createElement(Ce,null))}a(205).config(),l.a.render(c.a.createElement((function(){return c.a.createElement(C.a,null,c.a.createElement(M,null,c.a.createElement(Le,null)))}),null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");Ie?(!function(e,t){fetch(e).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ze(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ze(t,e)}))}}()}},[[134,1,2]]]);
//# sourceMappingURL=main.54cc18a7.chunk.js.map